(function(){"use strict";var t={2742:function(t,e,n){var o=n(6252),r=n(3907);const a=()=>{const t=(0,r.oR)();return{token:(0,o.Fl)((()=>t.getters["authUser/getToken"])),authUser:(0,o.Fl)((()=>t.getters["authUser/getAuthUser"])),isLoading:(0,o.Fl)((()=>t.getters["authUser/getIsLoading"])),fetchToken:e=>t.dispatch("authUser/fetchToken",e),fetchAuthUser:()=>t.dispatch("authUser/fetchAuthUser"),deleteToken:()=>t.dispatch("authUser/deleteToken")}};e["Z"]=a},2266:function(t,e,n){var o=n(6252),r=n(3907);const a=()=>{const t=(0,r.oR)();return{products:(0,o.Fl)((()=>t.getters["products/getProducts"])),productsFiltered:(0,o.Fl)((()=>t.getters["products/getProductsPagination"])),isLoading:(0,o.Fl)((()=>t.getters["products/getIsLoading"])),product:(0,o.Fl)((()=>t.getters["products/getProduct"])),productsLength:(0,o.Fl)((()=>t.getters["products/getProductsLength"])),fetchProducts:()=>t.dispatch("products/fetchProducts"),fetchProductById:e=>t.dispatch("products/fetchProductById",e),fetchProductByTitle:e=>t.dispatch("products/fetchProductByTitle",e),fetchProductByPagination:e=>t.dispatch("products/fetchProductByPagination",e)}};e["Z"]=a},6001:function(t,e,n){var o=n(9963),r=n(6252);const a=(0,r._)("header",null,null,-1);function i(t,e,n,o,i,s){const c=(0,r.up)("Main"),u=(0,r.up)("NavBar"),l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[a,(0,r.Wm)(c),(0,r._)("div",null,[(0,r.Wm)(u,{title:""}),(0,r.Wm)(l)])],64)}var s=n.p+"img/platzi_favicon.64d8f1f6.png";const c=t=>((0,r.dD)("data-v-6e0a0032"),t=t(),(0,r.Cn)(),t),u={class:"h2"},l=c((()=>(0,r._)("div",null,[(0,r._)("img",{alt:"logo app",src:s,width:"200",height:"150"})],-1))),d=[l];function p(t,e,n,o,a,i){return(0,r.wg)(),(0,r.iD)("header",u,d)}var f=(0,r.aZ)({name:"NavBar",props:{title:{type:String,required:!0,default:"Online shop"}}}),g=n(3744);const h=(0,g.Z)(f,[["render",p],["__scopeId","data-v-6e0a0032"]]);var v=h,m=(0,r.aZ)({name:"AppComponent",components:{NavBar:v}});const b=(0,g.Z)(m,[["render",i]]);var y=b,w=n(2201);const P=t=>((0,r.dD)("data-v-4c987718"),t=t(),(0,r.Cn)(),t),k={class:"input-group mb-3"},_=P((()=>(0,r._)("button",{class:"btn btn-outline-secondary",type:"submit",id:"button-addon2"},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,r._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})])],-1))),L={class:"home"},I={key:0},C={key:1,class:"product-list"};function A(t,e,n,a,i,s){const c=(0,r.up)("NavLinks"),u=(0,r.up)("NavigationButtons"),l=(0,r.up)("ProductItem");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(c,{onShowAll:t.showAllProducts},null,8,["onShowAll"]),(0,r._)("form",{onSubmit:e[1]||(e[1]=(0,o.iM)(((...e)=>t.validateInput&&t.validateInput(...e)),["prevent"]))},[(0,r._)("div",k,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.inputFilter=e),type:"text",class:"form-control",placeholder:"Buscar productos","aria-label":"Recipient's username","aria-describedby":"button-addon2",minlength:"3"},null,512),[[o.nr,t.inputFilter,void 0,{lazy:!0}]]),_])],32),(0,r.Wm)(u,{onPrevious:t.showPrevious,onNext:t.showNext},null,8,["onPrevious","onNext"]),(0,r._)("div",L,[t.isLoading?((0,r.wg)(),(0,r.iD)("div",I," Cargando... ")):((0,r.wg)(),(0,r.iD)("div",C,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.productsFiltered,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e.id,product:e,onGoDetail:t.goDetail},null,8,["product","onGoDetail"])))),128))]))])])}n(7658);var T=n(2262),F=n(3577);const B={class:"product-item"},N={class:"col"},U={class:"card"},S=["src","alt"],D={class:"card-body"},x={class:"card-title"},Z={class:"card-text"};function O(t,e,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",B,[(0,r._)("div",N,[(0,r._)("div",U,[(0,r._)("img",{src:t.product.images[0],class:"card-img-top",alt:t.product.title},null,8,S),(0,r._)("div",D,[(0,r._)("h5",x,(0,F.zw)(t.product.id)+" - "+(0,F.zw)(t.product.title),1),(0,r._)("p",Z,"Precio: € "+(0,F.zw)(t.product.price),1),(0,r._)("a",{class:"card-link",onClick:e[0]||(e[0]=e=>t.$emit("goDetail",t.product))},"Obtener más detalles")])])])])}var j=(0,r.aZ)({props:{product:{type:Object,required:!0}}});const E=(0,g.Z)(j,[["render",O],["__scopeId","data-v-2b8f0276"]]);var z=E,M=n(2266);const $={"aria-label":"Page navigation example"},W={class:"pagination justify-content-center"},H={class:"page-item"},q={class:"page-item"};function R(t,e,n,o,a,i){return(0,r.wg)(),(0,r.iD)("nav",$,[(0,r._)("ul",W,[(0,r._)("li",H,[(0,r._)("a",{class:"page-link",href:"#",onClick:e[0]||(e[0]=e=>t.$emit("previous"))},"Anterior")]),(0,r._)("li",q,[(0,r._)("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=e=>t.$emit("next"))},"Siguiente")])])])}var G=(0,r.aZ)({name:"CustomCard"});const K=(0,g.Z)(G,[["render",R],["__scopeId","data-v-33d5a276"]]);var V=K,Y=n(9314),J=(0,r.aZ)({name:"HomeView",components:{ProductItem:z,NavLinks:Y.Z,NavigationButtons:V},setup(){const{products:t,productsFiltered:e,isLoading:n,productsLength:o,fetchProducts:r,fetchProductByTitle:a,fetchProductByPagination:i}=(0,M.Z)(),s=(0,w.tv)();r();let c=(0,T.iH)("");const u=20,l=()=>{i({offset:0,limit:u})};i({offset:0,limit:u});const d=()=>{const e=c.value.toLowerCase();for(let n=0;n<o.value;n++)if(t.value[n].title.toLowerCase().includes(e)){const o=t.value[n].title.split(" ");for(let t=0;t<o.length;t++)o[t].toLowerCase().includes(e)&&a(o[t])}};let p=0;const f=()=>{0==p?alert("No hay productos anteriores"):(p-=20,i({offset:p,limit:u}))},g=()=>{p>=o.value?alert("No hay más productos"):(p+=20,i({offset:p,limit:u}))};return{products:t,productsFiltered:e,isLoading:n,goDetail:t=>s.push({name:"detail",params:{id:t.id}}),inputFilter:c,validateInput:d,showAllProducts:l,showPrevious:f,showNext:g}}});const Q=(0,g.Z)(J,[["render",A],["__scopeId","data-v-4c987718"]]);var X=Q;const tt=(t,e,n)=>{const o=localStorage.getItem("token");o?n():(alert("Necesitas un token para acceder"),n({name:"login"}))};var et=tt;const nt=[{path:"/",name:"home",beforeEnter:[et],component:X},{path:"/profile",name:"profile",beforeEnter:[et],component:()=>n.e(845).then(n.bind(n,2412))},{path:"/login",name:"login",component:()=>n.e(443).then(n.bind(n,4918))},{path:"/detail/:id",name:"detail",beforeEnter:[et],component:()=>n.e(167).then(n.bind(n,721)),props:t=>{const e=Number(t.params.id);return isNaN(e)?{id:null}:{id:e}}},{path:"/:pathMatch(.*)",component:()=>n.e(449).then(n.bind(n,9157))}],ot=(0,w.p7)({history:(0,w.r5)(),routes:nt});var rt=ot,at=n(3907);function it(){return{products:[],productsFiltered:[],isLoading:!1,selectedProduct:null}}var st=it;const ct={setProducts(t,e){t.products=e},setProductsFiltered(t,e){t.productsFiltered=e},setIsLoading(t,e){t.isLoading=e},setSelectedProduct(t,e){t.selectedProduct=e}};var ut=ct;const lt={getProducts(t){return t.products},getProductsPagination(t){return t.productsFiltered},getIsLoading(t){return t.isLoading},getProduct(t){return t.selectedProduct},getProductsLength(t){return t.products.length}};var dt=lt,pt=n(8945);const ft=pt.Z.create({baseURL:"https://api.escuelajs.co/api/v1"});ft.interceptors.request.use((t=>{const e=localStorage.getItem("token");return e&&t.headers.set("Authorization",`Bearer ${e}`),t}));var gt=ft;const ht={async fetchProducts({commit:t}){t("setIsLoading",!0);const{data:e}=await gt.get("/products");t("setIsLoading",!1),t("setProducts",e)},async fetchProductById({commit:t},e){t("setIsLoading",!0);const{data:n}=await gt.get(`/products/${e}`);t("setIsLoading",!1),t("setSelectedProduct",n)},async fetchProductByTitle({commit:t},e){t("setIsLoading",!0);const{data:n}=await gt.get(`/products/?title=${e}`);t("setIsLoading",!1),t("setProductsFiltered",n)},async fetchProductByPagination({commit:t},e){t("setIsLoading",!0);const{data:n}=await gt.get(`/products?offset=${e.offset}&limit=${e.limit}`);t("setIsLoading",!1),t("setProductsFiltered",n)}};var vt=ht;const mt={namespaced:!0,state:st,mutations:ut,getters:dt,actions:vt};var bt=mt;function yt(){return{token:null,authUser:null,isLoading:!1}}var wt=yt;const Pt={setToken(t,e){t.token=e},setAuthUser(t,e){t.authUser=e},setIsLoading(t,e){t.isLoading=e},deleteToken(t){t.token=null}};var kt=Pt;const _t={getToken(t){return t.token},getAuthUser(t){return t.authUser},getIsLoading(t){return t.isLoading}};var Lt=_t;const It={async fetchToken({commit:t},e){try{const{data:n}=await gt.post("/auth/login",e);t("setToken",n),localStorage.setItem("token",n.access_token),rt.push({name:"home"})}catch(n){console.error(n.message),alert("401 Usuario no autorizado")}},async fetchAuthUser({commit:t}){t("setIsLoading",!0);const{data:e}=await gt.get("/auth/profile");t("setIsLoading",!1),t("setAuthUser",e)},deleteToken({commit:t}){t("deleteToken"),localStorage.removeItem("token"),rt.push({name:"login"})}};var Ct=It;const At={namespaced:!0,state:wt,mutations:kt,getters:Lt,actions:Ct};var Tt=At,Ft=(0,at.MT)({state:{greeting:"Bienvenidos a la tienda online"},getters:{},mutations:{},actions:{},modules:{products:bt,authUser:Tt}});(0,o.ri)(y).use(Ft).use(rt).mount("#app")},9314:function(t,e,n){n.d(e,{Z:function(){return g}});var o=n(6252);const r=t=>((0,o.dD)("data-v-2a3b84d6"),t=t(),(0,o.Cn)(),t),a=r((()=>(0,o._)("div",null,null,-1))),i=r((()=>(0,o._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"},null,-1))),s=r((()=>(0,o._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"},null,-1))),c=[i,s];function u(t,e,n,r,i,s){const u=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("nav",null,[a,(0,o._)("div",null,[(0,o._)("ul",null,[(0,o._)("li",null,[(0,o.Wm)(u,{to:"/",onClick:t.showAllProducts},{default:(0,o.w5)((()=>[(0,o.Uk)("Productos")])),_:1},8,["onClick"])]),(0,o._)("li",null,[(0,o.Wm)(u,{to:{name:"profile"}},{default:(0,o.w5)((()=>[(0,o.Uk)("Mi perfil")])),_:1})])])]),(0,o._)("div",null,[((0,o.wg)(),(0,o.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:e[0]||(e[0]=(...e)=>t.logout&&t.logout(...e)),width:"16",height:"16",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},c))])])])}var l=n(2742),d=(0,o.aZ)({setup(t,{emit:e}){const n=()=>{e("showAll")},{deleteToken:o}=(0,l.Z)(),r=()=>{o()};return{showAllProducts:n,logout:r}}}),p=n(3744);const f=(0,p.Z)(d,[["render",u],["__scopeId","data-v-2a3b84d6"]]);var g=f}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,a){if(!o){var i=1/0;for(l=0;l<t.length;l++){o=t[l][0],r=t[l][1],a=t[l][2];for(var s=!0,c=0;c<o.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[c])}))?o.splice(c--,1):(s=!1,a<i&&(i=a));if(s){t.splice(l--,1);var u=r();void 0!==u&&(e=u)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[o,r,a]}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+{167:"detail",443:"about",449:"notFound",845:"profile"}[t]+"."+{167:"49d24b5e",443:"5e24e55c",449:"b57e01d0",845:"0436a712"}[t]+".js"}}(),function(){n.miniCssF=function(t){return"css/"+{167:"detail",443:"about",845:"profile"}[t]+"."+{167:"5d0d2bd2",443:"78c5e871",845:"99cb22bf"}[t]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="practica-vue-typescript:";n.l=function(o,r,a,i){if(t[o])t[o].push(r);else{var s,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==e+a){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+a),s.src=o),t[o]=[r];var p=function(e,n){s.onerror=s.onload=null,clearTimeout(f);var r=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(t){return t(n)})),e)return e(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/practica-vue-typescript/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,n,o,r){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var i=function(n){if(a.onerror=a.onload=null,"load"===n.type)o();else{var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,a.parentNode.removeChild(a),r(c)}};return a.onerror=a.onload=i,a.href=e,n?n.parentNode.insertBefore(a,n.nextSibling):document.head.appendChild(a),a},e=function(t,e){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],a=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(a===t||a===e))return r}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){r=i[o],a=r.getAttribute("data-href");if(a===t||a===e)return r}},o=function(o){return new Promise((function(r,a){var i=n.miniCssF(o),s=n.p+i;if(e(i,s))return r();t(o,s,null,r,a)}))},r={143:0};n.f.miniCss=function(t,e){var n={167:1,443:1,845:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=o(t).then((function(){r[t]=0}),(function(e){throw delete r[t],e})))}}}(),function(){var t={143:0};n.f.j=function(e,o){var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)o.push(r[2]);else{var a=new Promise((function(n,o){r=t[e]=[n,o]}));o.push(r[2]=a);var i=n.p+n.u(e),s=new Error,c=function(o){if(n.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var a=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,r[1](s)}};n.l(i,c,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,a,i=o[0],s=o[1],c=o[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(c)var l=c(n)}for(e&&e(o);u<i.length;u++)a=i[u],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(l)},o=self["webpackChunkpractica_vue_typescript"]=self["webpackChunkpractica_vue_typescript"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(6001)}));o=n.O(o)})();
//# sourceMappingURL=app.14ec1365.js.map